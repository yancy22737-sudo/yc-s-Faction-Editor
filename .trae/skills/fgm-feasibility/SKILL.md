---
name: "fgm-feasibility"
description: "做功能可行性分析与风险评估。用户提出新功能/改动、怀疑与原版机制冲突、或需要先判断能不能做时调用。"
---

# FGM 功能可行性分析

本技能用于在动手改代码前，快速判断“能不能做、代价多大、风险在哪里、建议怎么落地”，并给出可执行的结论与备选方案。

## 何时调用

- 用户提出新功能、重构、性能优化、兼容性需求，需要先评估可行性与影响面
- 需求涉及 RimWorld 1.6 原版机制、Def/Thing/Job/生成逻辑、Harmony Patch 交互，需要先确认切入点
- 需求可能影响存档兼容、和其他mod兼容性，语言适配、UI 架构、版本号/更新日志，需要先明确约束

## 分析输入（最少要拿到的信息）

- 目标：用户要解决什么问题（现象、期望行为、成功判定）
- 作用域：仅编辑器 UI？还是会影响生成/战斗/派系生成等运行时逻辑？
- 数据：新增/修改的数据结构、是否需要持久化到预设/存档
- 兼容：RimWorld 1.6、与现有 Patch/窗口的交互、是否会触发原版限制
- UI：是否需要多语言文本、不同分辨率/缩放表现

## 快速检查清单（必须覆盖）

- 架构契合：是否能放进现有模块边界（参考 README_ARCH 的分层与职责）
- UI 约束：组件化 Panels、低耦合、避免把状态与业务塞进单个 Window
- 原版/底层：涉及原版机制时优先用 rim-search 确认类/Def 关系与调用链
- Def 改动：若要改 Def，必须采用 PatchOperation，而不是直接覆盖 Def
- 兼容与风险：存档/预设版本迁移、性能热点（生成/绘制/频繁 Tick）、线程/IO
- 语言适配：所有新增 UI 字符串必须进 Language/Strings，并确保中英一致

## 产出格式（建议直接按此输出）

1) 结论
- 可行性：可做 / 可做但代价高 / 不建议
- 推荐方案：一句话描述主方案

2) 切入点
- 相关模块：UI/Managers/Data/IO/Patches（点名具体职责，不要求给变量名）
- 关键流程：从入口到数据落点的 3-6 步

3) 风险与对策
- 风险点：兼容性/性能/复杂度/可维护性
- 对策：如何避免或降级（含至少一个备选方案）

4) 影响面
- 可能要改的文件类型：窗口/Panel、数据模型、IO、语言文件、补丁
- 回归项：需要验证的用户路径与边界条件

## 决策原则（用于取舍）

- 优先选择“最小侵入 + 明确职责边界”的方案
- 能在 UI 表现层解决的，不要下沉到运行时生成逻辑
- Patch 点尽量靠近需求入口，避免全局扫描与高频反射
- 无法稳定兼容的功能必须提供降级路径或开关

